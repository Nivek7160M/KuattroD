<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrarse</title>
    <link rel="stylesheet" href="styles_autoregistro.css">
</head>

<body>

    <!-- Encabezado con logo -->
    <header class="navbar">
        <div class="navbar-container">
            <a href="index.html" class="nav-logo">
                <img src="https://kuattro.hn/wp-content/uploads/2019/03/Logo_Kuattro_VFinal_Flat-1.png" alt="Logo" class="nav-logo-img">
            </a>
        </div>
    </header>

    <!-- Todo lo que vayan a agregar -->
    <main class="main-content">
        <form id="registrationForm">
            <h2>Registrarse</h2>
            <hr>

            <input type="text" id="primerNombre" name="primerNombre" required placeholder="Primer Nombre">

            <input type="text" id="segundoNombre" name="segundoNombre" placeholder="Segundo Nombre">

            <input type="text" id="primerApellido" name="primerApellido" required placeholder="Primer Apellido">

            <input type="text" id="segundoApellido" name="segundoApellido" placeholder="Segundo Apellido">

            <input type="text" id="numeroID" name="numeroID" maxlength="15" required placeholder="Número de Identidad">
            <div id="identityMessage">Solo se permiten números y guiones (Ej: 0000-0000-00000).</div>

            <input type="email" id="email" name="email" required placeholder="Correo Electrónico">

            <div>
                <input type="password" id="password" name="password" required placeholder="Contraseña">
            </div>

            <div id="passwordRequerimientos" class="requirements">
                <ul>
                    <li id="lengthRequirement">Debe tener al menos 8 caracteres.</li>
                    <li id="uppercaseRequirement">Debe contener al menos una letra mayúscula.</li>
                    <li id="lowercaseRequirement">Debe contener al menos una letra minúscula.</li>
                    <li id="digitRequirement">Debe contener al menos un número.</li>
                    <li id="specialCharRequirement">Debe contener al menos un carácter especial (Ej: @, $, %, etc.).</li>
                </ul>
            </div>

            <input type="password" id="confirmacionPassword" name="confirmacionPassword" required placeholder="Confirma tu contraseña">
            <div id="passwordMatchMessage"></div>

            <!-- Este es el nuevo campo que aparecerá después de la contraseña -->
            <input type="text" id="usuarioGenerado" name="usuarioGenerado" readonly placeholder="Usuario generado" style="cursor: not-allowed;">

            <input type="submit" value="Registrarte">

            <p><a href="login.html" id="yaRegistrado">¿Ya estás registrado(a)?</a></p>
        </form>
    </main>

    <!-- Pie de página común -->
    <footer class="footer">
        <p>&copy; Kuattro Distribuciones. Todos los derechos reservados.</p>
    </footer>

    <script>
        // Variables
        const passwordInput = document.getElementById('password');
        const confirmPasswordInput = document.getElementById('confirmacionPassword');
        const identityInput = document.getElementById('numeroID');
        const passwordRequirements = document.getElementById('passwordRequerimientos');
        const identityMessage = document.getElementById('identityMessage');
        const passwordMatchMessage = document.getElementById('passwordMatchMessage');

        const lengthRequirement = document.getElementById('lengthRequirement');
        const uppercaseRequirement = document.getElementById('uppercaseRequirement');
        const lowercaseRequirement = document.getElementById('lowercaseRequirement');
        const digitRequirement = document.getElementById('digitRequirement');
        const specialCharRequirement = document.getElementById('specialCharRequirement');

        // Muestra los requisitos de contraseña cuando el input recibe foco
        passwordInput.addEventListener('focus', function() {
            passwordRequirements.style.display = 'block';
        });

        // Oculta los requisitos de contraseña cuando el input pierde el foco
        passwordInput.addEventListener('blur', function() {
            passwordRequirements.style.display = 'none';
        });

        // Validación en tiempo real de la contraseña
        passwordInput.addEventListener('input', function() {
            const password = passwordInput.value;

            const minLength = 8;
            const hasUpperCase = /[A-Z]/.test(password);
            const hasLowerCase = /[a-z]/.test(password);
            const hasDigit = /\d/.test(password);
            const hasSpecialChar = /[^\w\s]/.test(password); // Carácter especial: cualquier cosa que no sea letra o número

            // Longitud mínima
            if (password.length >= minLength) {
                lengthRequirement.classList.add('valid');
                lengthRequirement.classList.remove('invalid');
            } else {
                lengthRequirement.classList.add('invalid');
                lengthRequirement.classList.remove('valid');
            }

            // Mayúscula
            if (hasUpperCase) {
                uppercaseRequirement.classList.add('valid');
                uppercaseRequirement.classList.remove('invalid');
            } else {
                uppercaseRequirement.classList.add('invalid');
                uppercaseRequirement.classList.remove('valid');
            }

            // Minúscula
            if (hasLowerCase) {
                lowercaseRequirement.classList.add('valid');
                lowercaseRequirement.classList.remove('invalid');
            } else {
                lowercaseRequirement.classList.add('invalid');
                lowercaseRequirement.classList.remove('valid');
            }

            // Número
            if (hasDigit) {
                digitRequirement.classList.add('valid');
                digitRequirement.classList.remove('invalid');
            } else {
                digitRequirement.classList.add('invalid');
                digitRequirement.classList.remove('valid');
            }

            // Carácter especial
            if (hasSpecialChar) {
                specialCharRequirement.classList.add('valid');
                specialCharRequirement.classList.remove('invalid');
            } else {
                specialCharRequirement.classList.add('invalid');
                specialCharRequirement.classList.remove('valid');
            }
        });

        // Validación de los números de identidad (solo números y guiones)
        identityInput.addEventListener('focus', function() {
            identityMessage.style.display = 'block';
        });

        identityInput.addEventListener('blur', function() {
            identityMessage.style.display = 'none';
        });

        // Solo permitir números y guiones en el número de identidad
        identityInput.addEventListener('input', function() {
            this.value = this.value.replace(/[^0-9-]/g, ''); // Solo permite números y guiones
        });

        // Validación de confirmación de la contraseña en tiempo real
        confirmPasswordInput.addEventListener('input', function() {
            if (confirmPasswordInput.value !== passwordInput.value) {
                passwordMatchMessage.textContent = 'Las contraseñas no coinciden';
                passwordMatchMessage.classList.remove('password-match');
                passwordMatchMessage.classList.add('password-mismatch');
            } else {
                passwordMatchMessage.textContent = 'Las contraseñas coinciden';
                passwordMatchMessage.classList.remove('password-mismatch');
                passwordMatchMessage.classList.add('password-match');
            }
        });

        // Prevenir copiar y pegar en los campos de contraseña
        passwordInput.addEventListener('copy', function(event) {
            event.preventDefault(); // Evita la acción de copiar
        });

        confirmPasswordInput.addEventListener('copy', function(event) {
            event.preventDefault(); // Evita la acción de copiar
        });

        passwordInput.addEventListener('paste', function(event) {
            event.preventDefault(); // Evita la acción de pegar
        });

        confirmPasswordInput.addEventListener('paste', function(event) {
            event.preventDefault(); // Evita la acción de pegar
        });

        document.getElementById('registrationForm').addEventListener('submit', function(event) {
    event.preventDefault(); // Evita que el formulario se envíe de inmediato

    // Obtener los valores de los inputs
    const primerNombre = document.getElementById('primerNombre').value;
    const primerApellido = document.getElementById('primerApellido').value;

    // Tomar la primera letra de cada uno
    const primeraLetraNombre = primerNombre.charAt(0).toUpperCase();  // Convertimos a mayúscula
    const primeraLetraApellido = primerApellido.toUpperCase();  // Convertimos a mayúscula

    // Generar tres números aleatorios
    const randomNumbers = Math.floor(100 + Math.random() * 900); // Genera números entre 100 y 999

    // Crear el nuevo valor de usuario
    const nuevoUsuario = primeraLetraNombre + primeraLetraApellido + randomNumbers;

    // Asignar el valor generado al campo "usuarioGenerado"
    document.getElementById('usuarioGenerado').value = nuevoUsuario;
});


    </script>

</body>
</html>
