<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recuperar Contraseña</title>
    <link rel="stylesheet" href="public/css/styles.css">
    <link rel="stylesheet" href="public/css/recuperacion.css">
</head>

<body>
    <!-- Encabezado con logo -->
    <header class="navbar">
        <div class="navbar-container">
            <a href="login.html" class="nav-logo">
                <img src="https://kuattro.hn/wp-content/uploads/2019/03/Logo_Kuattro_VFinal_Flat-1.png" alt="Logo" class="nav-logo-img">
            </a>
        </div>
    </header>

    <!-- Contenido principal -->
    <main class="main-content">
        <div class="container">
            <h2>Recuperación de Contraseña</h2>
            <p>Ingresa tu correo para recibir un código de verificación</p>
            <label for="email">Correo Electrónico:</label>
            <input type="email" id="email" name="email" placeholder="Correo electrónico" required>
            <button id="openModalBtn">Enviar Código</button>
            <a href="login.html">Regresar al inicio</a>
        </div>

     
    </main>

    <!-- Modal para ingresar el código OTP -->
    <div id="otpModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Verificación OTP</h2>
            <p>Ingresa el código de verificación enviado a tu correo</p>
            <input type="text" id="otpInput" placeholder="Código OTP" maxlength="6">
            <button id="verifyOtpBtn">Verificar Código</button>
        </div>

    </div>

    <!-- Pie de página -->
    <footer class="footer">
        <p>&copy; Kuattro Distribuciones. Todos los derechos reservados.</p>
    </footer>

    <script>
        // Obtener elementos del DOM
        let openModalBtn = document.getElementById("openModalBtn");
        let modal = document.getElementById("otpModal");
        let closeModal = document.querySelector(".close");
        let verifyOtpBtn = document.getElementById("verifyOtpBtn");

        // Validar el correo antes de abrir el modal
        openModalBtn.addEventListener("click", function(event) {
            event.preventDefault(); // Evita que el formulario se envíe

            let emailInput = document.getElementById("email").value;
            let emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/; // Expresión regular para validar email

            if (!emailPattern.test(emailInput)) {
                alert("Por favor, ingresa un correo válido.");
                return;
            }

            modal.style.display = "block"; // Solo abre el modal si el correo es válido
        });

        // Cerrar modal al hacer clic en la "X"
        closeModal.addEventListener("click", function() {
            modal.style.display = "none";
        });

        // Cerrar modal al hacer clic fuera del contenido
        window.addEventListener("click", function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        });

        // Simulación de validación del código OTP
        verifyOtpBtn.addEventListener("click", function() {
            let otpInput = document.getElementById("otpInput").value;
            if (otpInput === "123456") { // Aquí iría la validación real con el backend
                alert("Código correcto. Redirigiendo...");
                window.location.href = "cambiarcontraseñarecu.html"; // Redirigir a la página de cambio de contraseña
            } else {
                alert("Código incorrecto. Intenta de nuevo.");
            }
        });
    </script>
</body>

</html>
